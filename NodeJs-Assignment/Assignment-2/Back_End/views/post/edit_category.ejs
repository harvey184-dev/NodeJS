<h3 style="text-align: center;">Sửa danh mục bài viết</h3>
<div class="col-md-6">
	<form id="edit_category_form">
		<script>
			const path = window.location.pathname;
			const parts = path.split('/');
			const id_category_post = parts[parts.length - 1];
			console.log(id_category_post);
			fetch(`http://localhost:3000/categorypost/${id_category_post}`)
				.then(res => res.json())
				.then(data => {
					let text = ``;
					data.forEach(c => text += text1(c))
					document.querySelector('#edit_category_form').innerHTML = text
				})

			const text1 = (c) => {
				return `<div class="form-group">
                    <label for="email">Tên danh mục</label>
                    <input type="text" id="title_category_post" value="${c.title_category_post}" class="form-control">
                </div>
                <div class="form-group">
                    <label for="pwd">Miêu tả danh mục</label>
                    <textarea rows="5" id="editor" class="form-control">${c.desc_category_post}</textarea>
                </div>

                <button type="submit" class="btn btn-default">Thêm danh mục</button>`
			}
		</script>

	</form>
</div>
<script>
	document.addEventListener('DOMContentLoaded', function () {
		document.getElementById('edit_category_form').addEventListener('submit', function (event) {
			event.preventDefault();

			let title_category_post = document.getElementById('title_category_post').value;
			let desc_category_post = CKEDITOR.instances.editor.getData();

			let data = {
				title_category_post: title_category_post,
				desc_category_post: desc_category_post
			};

			fetch(`http://localhost:3000/admin/edit_category_post/${id_category_post}`, {
				method: 'PUT',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify(data)
			})
				.then(res => {
					if (!res.ok) {
						throw new Error('Thêm sản phẩm không thành công');
					}
					return res.json();
				})
				.then(data => {
					console.log(data.message);
					window.location.href = '/admin/list_category_post';
				})
				.catch(error => {
					console.error('Lỗi:', error);
				});
		});
	});

</script>